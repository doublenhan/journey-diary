<mxfile host="app.diagrams.net" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36" version="22.0.0" type="device">
    <diagram name="Love Journey Diary - Complete Architecture" id="complete-arch">
        <mxGraphModel dx="1680" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1800" pageHeight="1400" math="0" shadow="0">
            <root>
                <mxCell id="0" />
                <mxCell id="1" parent="0" />

                <!-- Title -->
                <mxCell id="title" value="Love Journey Diary - Complete System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=26;fontStyle=1;fontColor=#ec4899;" vertex="1" parent="1">
                    <mxGeometry x="400" y="10" width="1000" height="50" as="geometry" />
                </mxCell>

                <!-- Security Layer Badge (Top) -->
                <mxCell id="security-badge" value="ðŸ”’ SECURITY LAYER" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc2626;strokeColor=#991b1b;fontColor=#ffffff;fontSize=14;fontStyle=1;" vertex="1" parent="1">
                    <mxGeometry x="800" y="70" width="200" height="40" as="geometry" />
                </mxCell>

                <!-- Left Security Panel -->
                <mxCell id="security-panel" value="ðŸ” AUTHENTICATION &amp; AUTHORIZATION" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fee2e2;strokeColor=#dc2626;strokeWidth=2;fontSize=13;fontStyle=1;fontColor=#991b1b;" vertex="1" parent="1">
                    <mxGeometry x="40" y="140" width="240" height="680" as="geometry" />
                </mxCell>

                <mxCell id="sec-auth" value="Firebase Auth&lt;br&gt;â€¢ Email/Password&lt;br&gt;â€¢ Phone + OTP&lt;br&gt;â€¢ reCAPTCHA" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dc2626;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="40" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-session" value="Session Mgmt&lt;br&gt;â€¢ httpOnly Cookies&lt;br&gt;â€¢ 24h expiry&lt;br&gt;â€¢ CSRF protection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="120" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-protected" value="Protected Routes&lt;br&gt;â€¢ useCurrentUserId&lt;br&gt;â€¢ Auth listener&lt;br&gt;â€¢ Redirect" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="200" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-rules" value="Firestore Rules&lt;br&gt;â€¢ Owner check&lt;br&gt;â€¢ User-specific&lt;br&gt;â€¢ Read/Write" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="280" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-api" value="API Security&lt;br&gt;â€¢ API_SECRET&lt;br&gt;â€¢ Server-side only&lt;br&gt;â€¢ CORS config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="360" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-validation" value="Input Validation&lt;br&gt;â€¢ sanitize.ts (XSS)&lt;br&gt;â€¢ File size/type&lt;br&gt;â€¢ DOMPurify" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="360" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-middleware" value="Middleware&lt;br&gt;â€¢ rateLimiter.js&lt;br&gt;â€¢ sessionAuth.js&lt;br&gt;â€¢ CORS config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="440" width="210" height="70" as="geometry" />
                </mxCell>

                <mxCell id="sec-retry" value="Retry Logic&lt;br&gt;â€¢ retry.ts utility&lt;br&gt;â€¢ Exponential backoff&lt;br&gt;â€¢ 3 retries max" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;align=left;verticalAlign=top;" vertex="1" parent="security-panel">
                    <mxGeometry x="15" y="520" width="210" height="70" as="geometry" />
                </mxCell>

                <!-- FRONTEND LAYER -->
                <mxCell id="frontend-container" value="FRONTEND LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FDF2F8;strokeColor=#ec4899;strokeWidth=3;fontSize=16;fontStyle=1;fontColor=#831843;" vertex="1" parent="1">
                    <mxGeometry x="320" y="140" width="1440" height="280" as="geometry" />
                </mxCell>

                <mxCell id="tech-stack" value="React 18 + TypeScript + Vite" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ec4899;strokeColor=#831843;fontColor=#ffffff;fontSize=13;fontStyle=1;" vertex="1" parent="frontend-container">
                    <mxGeometry x="580" y="30" width="280" height="35" as="geometry" />
                </mxCell>

                <!-- Pages Group -->
                <mxCell id="pages-group" value="Main Pages (6)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#ec4899;fontSize=12;fontStyle=1;fontColor=#831843;" vertex="1" parent="frontend-container">
                    <mxGeometry x="30" y="75" width="460" height="185" as="geometry" />
                </mxCell>

                <mxCell id="page-login" value="LoginPage&lt;br&gt;ðŸ” Auth" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="15" y="35" width="130" height="50" as="geometry" />
                </mxCell>

                <mxCell id="page-app" value="App.tsx&lt;br&gt;ðŸ  Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="160" y="35" width="130" height="50" as="geometry" />
                </mxCell>

                <mxCell id="page-create" value="CreateMemory&lt;br&gt;âœï¸ Create" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="305" y="35" width="130" height="50" as="geometry" />
                </mxCell>

                <mxCell id="page-view" value="ViewMemory&lt;br&gt;ðŸ“¸ Gallery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="15" y="95" width="130" height="50" as="geometry" />
                </mxCell>

                <mxCell id="page-anniversary" value="Anniversary&lt;br&gt;ðŸ“… Reminders" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="160" y="95" width="130" height="50" as="geometry" />
                </mxCell>

                <mxCell id="page-mood" value="MoodTracking&lt;br&gt;ðŸ˜Š Mood" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="pages-group">
                    <mxGeometry x="305" y="95" width="130" height="50" as="geometry" />
                </mxCell>

                <!-- Components Group -->
                <mxCell id="components-group" value="Components (20+)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#ec4899;fontSize=12;fontStyle=1;fontColor=#831843;" vertex="1" parent="frontend-container">
                    <mxGeometry x="520" y="75" width="360" height="185" as="geometry" />
                </mxCell>

                <mxCell id="comp-map" value="MapView&lt;br&gt;ðŸ—ºï¸ Map" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#059669;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="15" y="35" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-image" value="ImageUpload&lt;br&gt;ðŸ“¤ Upload" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#3b82f6;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="130" y="35" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-lazy" value="LazyImage&lt;br&gt;ðŸ–¼ï¸ Optimized" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#3b82f6;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="245" y="35" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-theme" value="ThemeSelector&lt;br&gt;ðŸŽ¨ Theme" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="15" y="95" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-events" value="EventsPage&lt;br&gt;ðŸ“† Events" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="130" y="95" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-search" value="EnhancedSearch&lt;br&gt;ðŸ” Filter" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#3b82f6;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="245" y="95" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-share" value="ShareMemory&lt;br&gt;ðŸ“¤ Export" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="15" y="155" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-stats" value="Statistics&lt;br&gt;ðŸ“Š Dashboard" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#8b5cf6;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="130" y="155" width="100" height="50" as="geometry" />
                </mxCell>

                <mxCell id="comp-error" value="ErrorBoundary&lt;br&gt;âš ï¸ Catch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#dc2626;fontSize=10;" vertex="1" parent="components-group">
                    <mxGeometry x="245" y="155" width="100" height="50" as="geometry" />
                </mxCell>

                <!-- Hooks Group -->
                <mxCell id="hooks-group" value="Custom Hooks (8)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FCE7F3;strokeColor=#ec4899;fontSize=12;fontStyle=1;fontColor=#831843;" vertex="1" parent="frontend-container">
                    <mxGeometry x="910" y="75" width="500" height="185" as="geometry" />
                </mxCell>

                <mxCell id="hook-user" value="useCurrentUserId" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="15" y="35" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-memory" value="useInfiniteMemories" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="135" y="35" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-cloudinary" value="useCloudinary" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="255" y="35" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-image-opt" value="useImageOptimization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="375" y="35" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-cache" value="useMemoriesCache" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="15" y="80" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-places" value="usePlacesAutocomplete" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="135" y="80" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-debounce" value="useDebouncedValue" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="255" y="80" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-sync" value="useSyncStatus" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fbbf24;strokeColor=#78350f;fontSize=9;fontColor=#78350f;" vertex="1" parent="hooks-group">
                    <mxGeometry x="375" y="80" width="110" height="35" as="geometry" />
                </mxCell>

                <mxCell id="hook-image-opt-2" value="Note: 8 hooks total&lt;br&gt;All verified âœ…" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#78350f;fontSize=8;fontColor=#78350f;align=center;" vertex="1" parent="hooks-group">
                    <mxGeometry x="75" y="125" width="350" height="35" as="geometry" />
                </mxCell>

                <!-- SERVERLESS API LAYER -->
                <mxCell id="api-container" value="SERVERLESS API LAYER (Vercel)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#E0E7FF;strokeColor=#3730a3;strokeWidth=3;fontSize=16;fontStyle=1;fontColor=#3730a3;" vertex="1" parent="1">
                    <mxGeometry x="320" y="460" width="1440" height="240" as="geometry" />
                </mxCell>

                <!-- Cloudinary APIs -->
                <mxCell id="api-cloudinary-group" value="Cloudinary API Endpoints" style="swimlane;whiteSpace=wrap;html=1;fillColor=#C7D2FE;strokeColor=#3730a3;fontSize=12;fontStyle=1;fontColor=#3730a3;" vertex="1" parent="api-container">
                    <mxGeometry x="30" y="35" width="840" height="185" as="geometry" />
                </mxCell>

                <mxCell id="api-upload" value="POST /upload&lt;br&gt;ðŸ“¤ Image" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="15" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-images" value="GET /images&lt;br&gt;ðŸ–¼ï¸ Fetch" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="145" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-memory" value="POST /memory&lt;br&gt;ðŸ’¾ Save" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="275" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-memories" value="GET /memories&lt;br&gt;ðŸ“š List" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="405" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-delete" value="DELETE /delete&lt;br&gt;ðŸ—‘ï¸ Remove" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;strokeColor=#991b1b;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="535" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-config" value="GET /config&lt;br&gt;âš™ï¸ Config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#10b981;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="665" y="35" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-health" value="GET /health&lt;br&gt;â¤ï¸ Health" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#10b981;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="145" y="95" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-single" value="GET /memory&lt;br&gt;ðŸ“„ Single" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="275" y="95" width="120" height="50" as="geometry" />
                </mxCell>

                <mxCell id="api-gallery" value="GET /gallery&lt;br&gt;ðŸ–¼ï¸ Gallery" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#3b82f6;strokeColor=#1e40af;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-cloudinary-group">
                    <mxGeometry x="405" y="95" width="120" height="50" as="geometry" />
                </mxCell>

                <!-- Nominatim APIs -->
                <mxCell id="api-nominatim-group" value="Nominatim API (OpenStreetMap)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#C7D2FE;strokeColor=#3730a3;fontSize=12;fontStyle=1;fontColor=#3730a3;" vertex="1" parent="api-container">
                    <mxGeometry x="900" y="35" width="510" height="185" as="geometry" />
                </mxCell>

                <mxCell id="api-nominatim-search" value="GET /nominatim/search&lt;br&gt;ðŸ” Places&lt;br&gt;(Autocomplete)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-nominatim-group">
                    <mxGeometry x="15" y="35" width="150" height="60" as="geometry" />
                </mxCell>

                <mxCell id="api-nominatim-reverse" value="GET /nominatim/reverse&lt;br&gt;ðŸ“ Geocoding&lt;br&gt;(GPS â†’ Address)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-nominatim-group">
                    <mxGeometry x="180" y="35" width="150" height="60" as="geometry" />
                </mxCell>

                <mxCell id="api-nominatim-free" value="âœ… 100% FREE&lt;br&gt;No API Key&lt;br&gt;Unlimited" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontColor=#065f46;fontSize=10;fontStyle=1;" vertex="1" parent="api-nominatim-group">
                    <mxGeometry x="345" y="35" width="150" height="60" as="geometry" />
                </mxCell>

                <mxCell id="api-nominatim-tiles" value="Map Tiles&lt;br&gt;ðŸ—ºï¸ OpenStreetMap&lt;br&gt;Leaflet.js" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-nominatim-group">
                    <mxGeometry x="97" y="105" width="150" height="60" as="geometry" />
                </mxCell>

                <mxCell id="api-nominatim-heatmap" value="Heatmap&lt;br&gt;ðŸŒ¡ï¸ Density&lt;br&gt;Visualization" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="api-nominatim-group">
                    <mxGeometry x="262" y="105" width="150" height="60" as="geometry" />
                </mxCell>

                <!-- BACKEND SERVICES LAYER -->
                <mxCell id="services-container" value="BACKEND SERVICES LAYER" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FFFDE4;strokeColor=#78350f;strokeWidth=3;fontSize=16;fontStyle=1;fontColor=#78350f;" vertex="1" parent="1">
                    <mxGeometry x="320" y="740" width="1440" height="280" as="geometry" />
                </mxCell>

                <!-- Firebase -->
                <mxCell id="firebase-group" value="Firebase Services (Google)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FEF08A;strokeColor=#78350f;fontSize=12;fontStyle=1;fontColor=#78350f;" vertex="1" parent="services-container">
                    <mxGeometry x="30" y="35" width="440" height="225" as="geometry" />
                </mxCell>

                <mxCell id="firebase-auth" value="Firebase Auth&lt;br&gt;ðŸ” Email/Password&lt;br&gt;Session Mgmt" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f59e0b;strokeColor=#78350f;fontColor=#ffffff;fontSize=10;" vertex="1" parent="firebase-group">
                    <mxGeometry x="15" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="firebase-firestore" value="Cloud Firestore&lt;br&gt;ðŸ“Š NoSQL DB&lt;br&gt;Real-time Sync" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f59e0b;strokeColor=#78350f;fontColor=#ffffff;fontSize=10;" vertex="1" parent="firebase-group">
                    <mxGeometry x="215" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="firebase-storage" value="Firebase Storage&lt;br&gt;ðŸ’¾ File Storage&lt;br&gt;(User Profiles)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f59e0b;strokeColor=#78350f;fontColor=#ffffff;fontSize=10;" vertex="1" parent="firebase-group">
                    <mxGeometry x="15" y="115" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="firebase-data" value="Firestore Collections:&lt;br&gt;â€¢ AnniversaryEvent&lt;br&gt;â€¢ users (profile, theme)&lt;br&gt;â€¢ memoryMetadata" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fde047;strokeColor=#78350f;fontColor=#78350f;fontSize=9;align=left;verticalAlign=top;" vertex="1" parent="firebase-group">
                    <mxGeometry x="215" y="115" width="180" height="70" as="geometry" />
                </mxCell>

                <!-- Cloudinary -->
                <mxCell id="cloudinary-group" value="Cloudinary (Image CDN)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FEF08A;strokeColor=#78350f;fontSize=12;fontStyle=1;fontColor=#78350f;" vertex="1" parent="services-container">
                    <mxGeometry x="500" y="35" width="440" height="225" as="geometry" />
                </mxCell>

                <mxCell id="cloudinary-storage" value="Image Storage&lt;br&gt;â˜ï¸ Cloud&lt;br&gt;Global CDN" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#06b6d4;strokeColor=#155e75;fontColor=#ffffff;fontSize=10;" vertex="1" parent="cloudinary-group">
                    <mxGeometry x="15" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="cloudinary-transform" value="Transform&lt;br&gt;ðŸŽ¨ WebP/JPEG&lt;br&gt;Resize, Crop" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#06b6d4;strokeColor=#155e75;fontColor=#ffffff;fontSize=10;" vertex="1" parent="cloudinary-group">
                    <mxGeometry x="215" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="cloudinary-search" value="Search API&lt;br&gt;ðŸ” Tags&lt;br&gt;Metadata" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#06b6d4;strokeColor=#155e75;fontColor=#ffffff;fontSize=10;" vertex="1" parent="cloudinary-group">
                    <mxGeometry x="15" y="115" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="cloudinary-features" value="Features:&lt;br&gt;â€¢ Progressive loading (LQIP)&lt;br&gt;â€¢ Responsive srcset&lt;br&gt;â€¢ Auto format/quality&lt;br&gt;â€¢ Folder: love-journal/" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#cffafe;strokeColor=#155e75;fontColor=#155e75;fontSize=9;align=left;verticalAlign=top;" vertex="1" parent="cloudinary-group">
                    <mxGeometry x="215" y="115" width="180" height="70" as="geometry" />
                </mxCell>

                <!-- OpenStreetMap -->
                <mxCell id="osm-group" value="OpenStreetMap (FREE)" style="swimlane;whiteSpace=wrap;html=1;fillColor=#FEF08A;strokeColor=#78350f;fontSize=12;fontStyle=1;fontColor=#78350f;" vertex="1" parent="services-container">
                    <mxGeometry x="970" y="35" width="440" height="225" as="geometry" />
                </mxCell>

                <mxCell id="osm-nominatim" value="Nominatim API&lt;br&gt;ðŸ—ºï¸ Geocoding&lt;br&gt;Search &amp; Reverse" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="osm-group">
                    <mxGeometry x="15" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="osm-tiles" value="Map Tiles&lt;br&gt;ðŸ—ºï¸ Interactive&lt;br&gt;Leaflet + React" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#059669;strokeColor=#065f46;fontColor=#ffffff;fontSize=10;" vertex="1" parent="osm-group">
                    <mxGeometry x="215" y="35" width="180" height="70" as="geometry" />
                </mxCell>

                <mxCell id="osm-features" value="Features:&lt;br&gt;â€¢ Place autocomplete&lt;br&gt;â€¢ GPS â†’ Address&lt;br&gt;â€¢ Interactive markers&lt;br&gt;â€¢ Heatmap viz&lt;br&gt;â€¢ Memory tracking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontColor=#065f46;fontSize=9;align=left;verticalAlign=top;" vertex="1" parent="osm-group">
                    <mxGeometry x="15" y="115" width="380" height="70" as="geometry" />
                </mxCell>

                <!-- Local Storage -->
                <mxCell id="local-storage" value="Browser Local Storage&lt;br&gt;ðŸ’¾ Cache &amp; Session&lt;br&gt;â€¢ User session (24h)&lt;br&gt;â€¢ Memories cache (10min)&lt;br&gt;â€¢ Theme preference&lt;br&gt;â€¢ Offline support" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ddd6fe;strokeColor=#5b21b6;fontColor=#2e1065;fontSize=10;fontStyle=1;align=left;verticalAlign=top;" vertex="1" parent="1">
                    <mxGeometry x="40" y="740" width="240" height="140" as="geometry" />
                </mxCell>

                <!-- Legend -->
                <mxCell id="legend-container" value="LEGEND" style="swimlane;whiteSpace=wrap;html=1;fillColor=#f3f4f6;strokeColor=#6b7280;fontSize=13;fontStyle=1;fontColor=#1f2937;" vertex="1" parent="1">
                    <mxGeometry x="40" y="920" width="240" height="300" as="geometry" />
                </mxCell>

                <mxCell id="legend-security" value="Security Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fee2e2;strokeColor=#dc2626;fontSize=10;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="35" width="210" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend-frontend" value="Frontend Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FDF2F8;strokeColor=#ec4899;fontSize=10;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="65" width="210" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend-api" value="API Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E0E7FF;strokeColor=#3730a3;fontSize=10;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="95" width="210" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend-services" value="Services Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE4;strokeColor=#78350f;fontSize=10;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="125" width="210" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend-cache" value="Cache/Session" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ddd6fe;strokeColor=#5b21b6;fontSize=10;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="155" width="210" height="25" as="geometry" />
                </mxCell>

                <mxCell id="legend-stats" value="ðŸ“Š Statistics:&lt;br&gt;â€¢ 6 Main Pages&lt;br&gt;â€¢ 20+ Components&lt;br&gt;â€¢ 8 Custom Hooks&lt;br&gt;â€¢ 7 Cloudinary APIs&lt;br&gt;â€¢ 4 Nominatim APIs&lt;br&gt;â€¢ 16 Security Features âœ…" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#78350f;fontSize=9;align=left;verticalAlign=top;fontColor=#78350f;fontStyle=1;" vertex="1" parent="legend-container">
                    <mxGeometry x="15" y="190" width="210" height="95" as="geometry" />
                </mxCell>

                <!-- Security Features Summary -->
                <mxCell id="security-summary" value="ðŸ” SECURITY FEATURES SUMMARY" style="swimlane;whiteSpace=wrap;html=1;fillColor=#fee2e2;strokeColor=#dc2626;strokeWidth=2;fontSize=13;fontStyle=1;fontColor=#991b1b;" vertex="1" parent="1">
                    <mxGeometry x="320" y="1060" width="1440" height="160" as="geometry" />
                </mxCell>

                <mxCell id="feat-implemented" value="âœ… IMPLEMENTED (16 Features)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="30" y="35" width="850" height="20" as="geometry" />
                </mxCell>

                <mxCell id="feat1" value="âœ… Firebase Auth (Email + Phone OTP)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="30" y="60" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat2" value="âœ… httpOnly Cookies (24h)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="195" y="60" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat3" value="âœ… Protected Routes" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="360" y="60" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat4" value="âœ… Firestore Rules" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="525" y="60" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat5" value="âœ… API Secret Protection" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="30" y="95" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat6" value="âœ… XSS Prevention (DOMPurify)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="195" y="95" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat7" value="âœ… Rate Limiting (100/min)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="360" y="95" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat8" value="âœ… CSP Headers" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="525" y="95" width="155" height="30" as="geometry" />
                </mxCell>

                <mxCell id="feat9" value="âœ… HTTPS Enforcement (HSTS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="30" y="130" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat10" value="âœ… Password Reset" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="195" y="130" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat11" value="âœ… Security Monitoring" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="360" y="130" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat12" value="âœ… Input Validation" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="525" y="130" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat13" value="âœ… CORS Config" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="690" y="60" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat14" value="âœ… Sanitize Utils (XSS)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="690" y="90" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat15" value="âœ… Retry Logic" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="690" y="120" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat16" value="âœ… Middleware Layer" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d1fae5;strokeColor=#065f46;fontSize=9;fontColor=#065f46;" vertex="1" parent="security-summary">
                    <mxGeometry x="855" y="60" width="155" height="25" as="geometry" />
                </mxCell>

                <mxCell id="feat-todo" value="âš ï¸ RECOMMENDED (1 Deferred)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=11;fontStyle=1;fontColor=#78350f;" vertex="1" parent="security-summary">
                    <mxGeometry x="900" y="35" width="510" height="20" as="geometry" />
                </mxCell>

                <mxCell id="gap6" value="â¸ï¸ 2FA/MFA (Deferred)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fef3c7;strokeColor=#f59e0b;fontSize=10;fontColor=#78350f;fontStyle=1;" vertex="1" parent="security-summary">
                    <mxGeometry x="900" y="60" width="510" height="65" as="geometry" />
                </mxCell>

                <mxCell id="score" value="ðŸ† Security Score: 16/17 Features = 94%" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dcfce7;strokeColor=#065f46;fontSize=12;fontColor=#065f46;fontStyle=1;" vertex="1" parent="security-summary">
                    <mxGeometry x="1020" y="60" width="390" height="90" as="geometry" />
                </mxCell>

                <!-- Tech Stack -->
                <mxCell id="tech-labels" value="ðŸ“¦ Technology Stack:&lt;br&gt;React 18 â€¢ TypeScript â€¢ Vite â€¢ React Router â€¢ Leaflet â€¢ Lucide Icons â€¢ DOMPurify&lt;br&gt;Firebase SDK â€¢ Cloudinary SDK â€¢ React DatePicker â€¢ HTML2Canvas â€¢ jsPDF&lt;br&gt;Version 2.2 | Updated: December 7, 2025 | Security Score: 94% (16/17) | 5 New Components Integrated âœ…" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e5e7eb;strokeColor=#6b7280;fontSize=10;align=center;fontColor=#1f2937;" vertex="1" parent="1">
                    <mxGeometry x="320" y="1240" width="1440" height="80" as="geometry" />
                </mxCell>

                <!-- Data Flow Arrows -->
                <mxCell id="arrow-sec-frontend" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#dc2626;endArrow=block;endFill=1;dashed=1;" edge="1" parent="1" source="security-panel" target="frontend-container">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>

                <mxCell id="arrow-frontend-api" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#3730a3;endArrow=block;endFill=1;startArrow=block;startFill=1;" edge="1" parent="1" source="frontend-container" target="api-container">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>

                <mxCell id="arrow-api-services" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=3;strokeColor=#78350f;endArrow=block;endFill=1;startArrow=block;startFill=1;" edge="1" parent="1" source="api-container" target="services-container">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>

                <mxCell id="arrow-frontend-local" style="edgeStyle=orthogonalEdgeStyle;rounded=1;orthogonalLoop=1;jettySize=auto;html=1;strokeWidth=2;strokeColor=#5b21b6;endArrow=block;endFill=1;startArrow=block;startFill=1;dashed=1;" edge="1" parent="1" source="local-storage" target="frontend-container">
                    <mxGeometry relative="1" as="geometry" />
                </mxCell>

            </root>
        </mxGraphModel>
    </diagram>
</mxfile>
